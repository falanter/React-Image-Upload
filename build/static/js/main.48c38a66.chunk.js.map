{"version":3,"sources":["components/logo.svg","components/Header.js","components/Footer.js","components/Loading.js","App.js","reportWebVitals.js","index.js","models/index.js","stores/user.js","stores/auth.js","stores/image.js","stores/history.js","stores/index.js"],"names":["StyleButton","styled","Button","Login","div","Header","header","Logo","img","StyledLink","NavLink","Component","observer","history","useHistory","useStores","UserStore","AuthStore","HistoryStore","useEffect","pullUser","src","LogoUrl","onClick","push","to","activeClassName","exact","currentUser","attributes","username","type","logout","reset","message","success","Footer","footer","target","rel","href","Loading","active","Home","lazy","About","History","Register","test","App","fallback","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","AV","init","appId","appKey","serverURL","Auth","password","user","User","setUsername","setPassword","Promise","resolve","reject","signUp","loginedUser","error","console","log","logIn","logOut","current","Uploader","file","filename","item","Object","avFile","File","set","save","serverFile","page","limit","query","Query","include","skip","descending","equalTo","find","results","catch","makeObservable","this","observable","action","values","err","resetUser","newFilename","newFile","isUpoading","finally","newList","list","concat","isLoading","append","length","hasMore","context","createContext","ImageStore","window","stores","useContext"],"mappings":"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","file":"static/js/main.48c38a66.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React,{useEffect} from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport LogoUrl from './logo.svg';\r\nimport styled from 'styled-components';\r\nimport {Button, message} from 'antd';\r\nimport { useStores } from '../stores';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst StyleButton=styled(Button)`\r\n  margin-left:10px;\r\n`;\r\nconst Login=styled.div`\r\n  margin-left:auto;\r\n`;\r\n\r\nconst Header=styled.header`\r\n  background-color:#343A40;\r\n  padding:10px 100px;\r\n  display:flex;\r\n  align-items:center;\r\n  color:#fff;\r\n`;\r\nconst Logo=styled.img`\r\n  height:35px;\r\n  &:hover{\r\n    cursor:pointer;\r\n  }\r\n`;\r\nconst StyledLink=styled(NavLink)`\r\n  color: rgba(255,255,255,.5);\r\n  margin-left:20px;\r\n  &:hover{\r\n    color:rgba(255,255,255,.7);\r\n  }\r\n  &.active{\r\n    // border-bottom:1px solid #fff;\r\n    color:#fff;\r\n  }\r\n`;\r\n\r\nconst  Component = observer(() => {\r\n  const history = useHistory();\r\n  const { UserStore, AuthStore,HistoryStore } = useStores();\r\n  // console.log(UserStore)\r\n  const handleLogin = () => {\r\n    // console.log('跳转到登录页面')\r\n    history.push('/login');\r\n  };\r\n  const handleLogout = () => {\r\n    AuthStore.logout();\r\n    HistoryStore.reset();\r\n    message.success('已注销');\r\n  };\r\n  const handleRegister = () => {\r\n    // console.log('跳转到注册页面')\r\n    history.push('/register');\r\n  };\r\n  const toHome = () => {\r\n    history.push('/');\r\n  };\r\n  useEffect(()=>{\r\n    UserStore.pullUser();\r\n  },[])// eslint-disable-line react-hooks/exhaustive-deps\r\n  return (\r\n    <Header>\r\n        <Logo src={LogoUrl} onClick={toHome} />\r\n        <nav>\r\n          <StyledLink to=\"/\" activeClassName=\"active\" exact>首页</StyledLink>\r\n          <StyledLink to=\"/history\" activeClassName=\"active\">上传历史</StyledLink>\r\n          <StyledLink to=\"/about\" activeClassName=\"active\">关于</StyledLink>\r\n        </nav>\r\n        <Login>\r\n        {\r\n          UserStore.currentUser ? <>\r\n            {UserStore.currentUser.attributes.username} <StyleButton type=\"primary\" onClick={handleLogout}>注销</StyleButton>\r\n          </> :<>\r\n          <StyleButton type=\"primary\" onClick={handleLogin}>登录</StyleButton>\r\n          <StyleButton type=\"primary\" onClick={handleRegister}>注册</StyleButton>\r\n          </>\r\n        }\r\n        </Login>\r\n    </Header>\r\n  );\r\n});\r\n\r\nexport default Component;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Footer=styled.footer`\r\n  padding:10px 100px;\r\n  text-align:center;\r\n  font-size:12px;\r\n  color:#aaa;\r\n  background:#F5F5F5;\r\n`;\r\n\r\nfunction Component() {\r\n  return (\r\n    <Footer>\r\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/falanter/React-Image-Upload\">Github</a>\r\n    </Footer>\r\n  );\r\n}\r\n\r\nexport default Component;","import React from 'react';\r\nimport { Skeleton } from 'antd';\r\n\r\nexport default function Loading() {\r\n    return(\r\n        <Skeleton active />\r\n    )\r\n}","import './App.css';\nimport {\n  Switch,Route\n} from 'react-router-dom';\nimport React,{ Suspense ,lazy} from 'react';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Loading from './components/Loading';\nconst Home=lazy(()=>import('./pages/Home'));\nconst About=lazy(()=>import('./pages/About'));\nconst History=lazy(()=>import('./pages/History'));\nconst Login=lazy(()=>import('./pages/Login'));\nconst Register=lazy(()=>import('./pages/Register'));\nconst test=lazy(()=>import('./pages/test'));\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <main>\n        <Suspense fallback={<Loading />}>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/history\" component={History} />\n            <Route path=\"/about\" component={About} />\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/register\" component={Register} />\n            <Route path=\"/test\" component={test} />\n          </Switch>\n        </Suspense>\n      </main>\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport 'antd/dist/antd.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {\n  HashRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n    <Router>\n      <App />\n    </Router>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import AV, { User } from 'leancloud-storage';\r\n\r\nAV.init({\r\n  appId: \"UqBaAsQMqOQB3rLwNGLTKtOF-gzGzoHsz\",\r\n  appKey: \"uv9EyQmkgX7UjUt4TeVUBhVa\",\r\n  serverURL: \"https://uqbaasqm.lc-cn-n1-shared.com\"\r\n});\r\n\r\nconst Auth = {\r\n  register(username, password) {\r\n    let user = new User();\r\n    user.setUsername(username);\r\n    user.setPassword(password);\r\n    return new Promise((resolve, reject) => {\r\n      user.signUp().then(loginedUser => resolve(loginedUser), error => reject(error))\r\n    });\r\n  },\r\n\r\n  login(username, password) {\r\n    console.log('------')\r\n    console.log(username, password)\r\n    return new Promise((resolve, reject) => {\r\n      User.logIn(username, password).then(loginedUser => resolve(loginedUser), error => reject(error));\r\n    });\r\n  },\r\n\r\n  logout() {\r\n    User.logOut();\r\n  },\r\n\r\n  getCurrentUser() {\r\n    return User.current();\r\n  }\r\n\r\n};\r\n\r\nconst Uploader = {\r\n  add(file, filename) {\r\n    const item = new AV.Object('Image');\r\n    const avFile = new AV.File(filename, file);\r\n    item.set('filename', filename);\r\n    item.set('owner', AV.User.current());\r\n    item.set('url', avFile);\r\n    return new Promise((resolve, reject) => {\r\n      item.save().then(serverFile => resolve(serverFile), error => reject(error));\r\n    });\r\n  },\r\n\r\n  find({page=0, limit=10}) {\r\n    const query = new AV.Query('Image');\r\n    query.include('owner');   //获得所有用户信息\r\n    query.limit(limit);       //显示数量\r\n    query.skip(page*limit);   //跳转到\r\n    query.descending('createdAt');  //按时间降序排列\r\n    query.equalTo('owner', AV.User.current());  //询查自己\r\n    return new Promise((resolve, reject) => {\r\n      query.find()\r\n        .then(results => resolve(results))\r\n        .catch(error => reject(error))\r\n    });\r\n  }\r\n}\r\n\r\n// window.Uploader=Uploader;\r\n// Uploader.find({page:0,limit:10}).then(data => console.log(data))\r\n\r\nexport {\r\n  Auth,\r\n  Uploader\r\n};","import { makeObservable, observable, action } from 'mobx';\r\nimport { Auth } from '../models';\r\n\r\nclass UserStore {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n\r\n  @observable currentUser = null;\r\n\r\n  @action pullUser() {\r\n    // console.log('pull user')\r\n    this.currentUser = Auth.getCurrentUser()\r\n  }\r\n\r\n  @action resetUser() {\r\n    this.currentUser = null;\r\n  }\r\n}\r\n\r\nexport default new UserStore() ;\r\n","import { makeObservable, observable, action } from 'mobx';\r\nimport { Auth } from '../models';\r\nimport UserStore from './user';\r\n\r\nclass AuthStore {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n  @observable values = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  @action setUsername(username) {\r\n    this.values.username = username;\r\n  }\r\n\r\n  @action setPassword(password) {\r\n    this.values.password = password;\r\n  }\r\n\r\n  @action login() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.login(this.values.username, this.values.password)\r\n      .then(user => {\r\n        UserStore.pullUser();\r\n        resolve(user);\r\n      }).catch(err => {\r\n        UserStore.resetUser();\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n  @action register() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.register(this.values.username, this.values.password)\r\n      .then(user => {\r\n        UserStore.pullUser();\r\n        resolve(user);\r\n      }).catch(err => {\r\n        UserStore.resetUser();\r\n        reject(err);\r\n      })\r\n    });  \r\n  }\r\n\r\n  @action logout() {\r\n    Auth.logout();\r\n    UserStore.resetUser();\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default new AuthStore();\r\n","import { observable, action, makeObservable } from 'mobx';\nimport { Uploader } from '../models';\nimport { message } from 'antd';\n\nclass ImageStore {\n  constructor() {\n    makeObservable(this)\n  }\n  @observable filename = \"\";\n  @observable file = null;\n  @observable isUpoading = false;\n  @observable serverFile = null;\n\n  @action setFilename(newFilename) {\n    this.filename = newFilename;\n  }\n\n  @action setFile(newFile) {\n    this.file = newFile;\n  }\n\n  @action upload() {\n    this.isUpoading = true;\n    this.serverFile = null;\n    return new Promise((resolve, reject) => {\n      Uploader.add(this.file, this.filename)\n      .then(serverFile => {\n        this.serverFile = serverFile;\n        resolve(serverFile);\n      }).catch(err => {\n        message.error('上传失败');\n        reject(err);\n      }).finally(() => {\n        this.isUpoading = false;\n      });\n    })\n      \n  }\n\n  @action reset() {\n    this.isUpoading = false;\n    this.serverFile = null;\n  }\n}\n\n\nexport default new ImageStore();\n","import { observable, action, makeObservable } from 'mobx';\nimport { Uploader } from '../models';\nimport { message } from 'antd';\n\nclass HistoryStore {\n  constructor() {\n    makeObservable(this)\n  }\n  @observable list = [];          //列表\n  @observable isLoading = false;  //是否在加载中\n  @observable hasMore = true;     //是否有更多的数据\n  @observable page = 0;           //当前第几页\n  limit = 10;\n\n  @action append(newList) {\n    this.list = this.list.concat(newList);\n  }\n\n  @action find() {\n    console.log('a')\n    this.isLoading = true;\n    Uploader.find({page: this.page, limit: this.limit})\n      .then(newList => {\n        this.append(newList);\n        this.page++;\n        if(newList.length < this.limit) {\n          this.hasMore = false;\n        }\n      }).catch(error => {\n        message.error('加载数据失败');\n      }).finally(() => {\n        this.isLoading = false;\n      });\n  }\n\n  @action reset() {\n    this.list = [];\n    this.isLoading = false;\n    this.hasMore = true;\n    this.page = 0;\n  }\n\n}\n\n\nexport default new HistoryStore();\n","import { createContext, useContext } from 'react';\r\nimport AuthStore from './auth';\r\nimport UserStore from './user';\r\nimport ImageStore from './image';\r\nimport HistoryStore from './history';\r\n\r\nconst context = createContext({\r\n  AuthStore,\r\n  UserStore,\r\n  ImageStore,\r\n  HistoryStore\r\n});\r\n\r\nwindow.stores = {\r\n  AuthStore,\r\n  UserStore,\r\n  ImageStore,\r\n  HistoryStore\r\n};\r\n\r\nexport const useStores = () => useContext(context);"],"sourceRoot":""}